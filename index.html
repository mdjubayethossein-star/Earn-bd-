<script src='//libtl.com/sdk.js' data-zone='9384518' data-sdk='show_9384518'></script>

<script>
    function runAd() {
        if (adCount >= 100) return alert("Limit Over!");
        
        const btn = document.getElementById('watch-btn');
        btn.innerText = "Loading Ad...";
        btn.disabled = true; // অ্যাড লোড হওয়ার সময় বাটন লক থাকবে

        // ইন-অ্যাপ ইন্টারস্টিশিয়াল ফরম্যাট (এটি বটের বাইরে নিয়ে যাবে না)
        show_9384518({
            type: 'inApp',
            inAppSettings: {
                frequency: 1,
                capping: 0.1,
                interval: 0,
                timeout: 5,
                everyPage: true
            }
        }).then(() => {
            // অ্যাড দেখা শেষ হলে রিওয়ার্ড
            completeAd();
            btn.disabled = false;
        }).catch(e => {
            // যদি ইন-অ্যাপ লোড না হয় তবে রিওয়ার্ডেড ট্রাই করবে
            show_9384518().then(() => {
                completeAd();
                btn.disabled = false;
            }).catch(() => {
                btn.innerText = "WATCH AD";
                btn.disabled = false;
                alert("অ্যাড লোড হচ্ছে না, কিছুক্ষণ পর চেষ্টা করুন।");
            });
        });
    }

    function completeAd() {
        balance += 0.07;
        adCount++;
        save();
        updateUI();
        document.getElementById('watch-btn').innerText = "WATCH AD";
        tg.showPopup({
            title: "Success",
            message: "৳ ০.০৭ যোগ হয়েছে! পরবর্তী অ্যাডের জন্য তৈরি হন।"
        });
    }
</script>